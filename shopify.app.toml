# Learn more about configuring your app at https://shopify.dev/docs/apps/tools/cli/configuration

client_id = "ff2cbc055629c8491a3d0320e1f028e9"
name = "AI Upsell"
application_url = "https://ai-upsell.onrender.com/"
embedded = true

# ---------------------------
# Build
# ---------------------------
[build]
automatically_update_urls_on_dev = true

# ---------------------------
# Webhooks
# ---------------------------
[webhooks]
api_version = "2026-01"

# App lifecycle
[[webhooks.subscriptions]]
topics = ["app/uninstalled"]
uri = "/webhooks/app/uninstalled"

[[webhooks.subscriptions]]
topics = ["app/scopes_update"]
uri = "/webhooks/app/scopes_update"

# Product sync webhooks
[[webhooks.subscriptions]]
topics = ["products/create"]
uri = "/webhooks/products/create"

[[webhooks.subscriptions]]
topics = ["products/update"]
uri = "/webhooks/products/update"

[[webhooks.subscriptions]]
topics = ["products/delete"]
uri = "/webhooks/products/delete"

# ---------------------------
# Mandatory Compliance Webhooks (REQUIRED)
# ---------------------------
[[webhooks.subscriptions]]
compliance_topics = [
  "customers/data_request",
  "customers/redact",
  "shop/redact"
]
uri = "/webhooks/compliance"

# ---------------------------
# Access scopes
# ---------------------------
[access_scopes]
scopes = "write_products,read_products"

# ---------------------------
# Auth
# ---------------------------
[auth]
redirect_urls = ["https://ai-upsell.onrender.com/auth/callback"]

# ---------------------------
# App Proxy
# ---------------------------
[app_proxy]
url = "https://ai-upsell.onrender.com/api/proxy"
subpath = "ai-upsell"
prefix = "apps"
